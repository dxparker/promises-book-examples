<!DOCTYPE html>
<html>
<head>
<title>1-7. Naive asynchronous code. This doesn’t work!</title>
<link href="../prism.css" rel="stylesheet">
<script src="../prism.js"></script>
</head>
<body>

<nav>
<a href="1-06-nodejs-async-fileio.html">Previous</a> | <a href="1-08-jquery-ready.html">Next</a>
</nav>

<h1>Example 1-7. Naive asynchronous code. This doesn’t work!</h1>

<pre>
<code class="language-javascript">
var fs = require('fs');
var timestamp = new Date().toString();
var contents;

fs.writeFile('date.txt', timestamp, function (err) {
	if (err) throw err;
});

fs.readFile('date.txt', function (err, data) {
	if (err) throw err;
	contents = data; // 3
});

console.log('Comparing the contents'); // 1
console.assert(timestamp == contents); // 2 - FAIL!
</code>
</pre>

</body>
</html>
